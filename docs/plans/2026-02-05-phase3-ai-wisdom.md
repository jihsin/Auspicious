# 好日子 2.0 - AI 智慧系統優化規劃

> 建立日期：2026-02-05
> 狀態：規劃中

## 願景

**從「天氣預測 App」轉型為「天時地利」智慧決策系統**

結合：
- 36 年歷史氣象數據（統計科學）
- 千年傳統智慧（經驗科學）
- AI 全球知識（知識整合）

## 核心理念

1. **歷史統計也是科學** - 基於大量數據的機率預測
2. **傳統智慧有其道理** - 用數據驗證老祖宗的觀察
3. **氣候正在改變** - 需要展示趨勢，而非只有平均值
4. **提供決策支援** - 不只給數字，給可執行的建議

---

## 開發階段規劃

### Phase 3.1 - 數據基礎強化
**目標：讓歷史數據更有意義**

#### P3.1.1 年代分層統計
- [ ] 修改 DailyStatistics 模型，增加年代分層欄位
- [ ] 計算 1990s / 2000s / 2010s / 2020s 各年代平均
- [ ] 計算近 10 年 vs 全期的差異
- [ ] API 回傳年代趨勢資訊

#### P3.1.2 百分位數計算
- [ ] 為每個 month_day 計算溫度百分位數分布
- [ ] 即時天氣可顯示「高於歷史 X% 的紀錄」
- [ ] 極值記錄附帶發生年份

#### P3.1.3 氣候變遷指標
- [ ] 計算各站點 30 年溫度趨勢（線性回歸斜率）
- [ ] 計算降雨型態變化（天數減少、強度增加）
- [ ] 計算極端天氣頻率變化

### Phase 3.2 - 傳統智慧整合
**目標：連結節氣、諺語、農民曆**

#### P3.2.1 節氣資料庫
- [ ] 建立 24 節氣資料表
  - 節氣名稱、日期範圍、太陽黃經
  - 天文意義、農業意義
  - 相關諺語
  - 物候特徵
- [ ] API：取得當前節氣深度資訊
- [ ] 用歷史數據驗證節氣的氣象特徵

#### P3.2.2 氣象諺語庫
- [ ] 建立諺語資料表
  - 諺語內容（中文）
  - 來源（全國/臺灣在地）
  - 科學解釋
  - 適用季節/條件
- [ ] 收集臺灣在地諺語（至少 50 則）
- [ ] API：諺語驗證（用歷史數據計算準確率）

#### P3.2.3 農民曆整合
- [ ] 擴充 cnlunar 資料，取得每日宜忌
- [ ] 分析農民曆「宜嫁娶」與歷史好天氣的相關性
- [ ] 提供文化背景說明

### Phase 3.3 - AI 智慧引擎
**目標：用 AI 生成有意義的洞察**

#### P3.3.1 LLM 整合架構
- [ ] 設計 Prompt 模板系統
- [ ] 整合 Claude API 或 OpenAI API
- [ ] 建立知識注入機制（節氣、諺語、地理知識）

#### P3.3.2 智慧解讀生成
- [ ] 節氣深度解讀生成
- [ ] 諺語科學解釋生成
- [ ] 氣候變遷觀察報告生成
- [ ] 活動規劃建議生成

#### P3.3.3 快取與優化
- [ ] 常見查詢結果快取
- [ ] 預生成熱門日期的解讀
- [ ] 控制 API 成本

### Phase 3.4 - 進階功能
**目標：提供獨特價值**

#### P3.4.1 智慧活動規劃
- [ ] 用戶輸入：活動類型、地點、月份
- [ ] 系統輸出：最佳日期推薦 + 理由
- [ ] 包含：天氣、節氣、農民曆、交通考量
- [ ] 提供 Plan B 建議

#### P3.4.2 臺灣微氣候地圖
- [ ] 收集各地特色氣候資料
- [ ] 解釋地形、季風影響
- [ ] 視覺化呈現

#### P3.4.3 物候預報
- [ ] 建立物候資料庫（櫻花、螢火蟲等）
- [ ] 基於積溫模型預測花期
- [ ] 整合生態旅遊建議

### Phase 3.5 - 前端體驗升級
**目標：故事化、互動化呈現**

#### P3.5.1 節氣頁面
- [ ] 節氣深度解讀卡片
- [ ] 相關諺語展示
- [ ] 歷史數據視覺化

#### P3.5.2 氣候變遷儀表板
- [ ] 30 年溫度趨勢圖
- [ ] 極端天氣頻率圖
- [ ] 互動式探索

#### P3.5.3 活動規劃精靈
- [ ] 步驟式引導 UI
- [ ] 結果頁面設計
- [ ] 分享功能

---

## 資料需求

### 需要收集的資料

1. **節氣資料**
   - 24 節氣完整資訊
   - 來源：天文台、農業文獻

2. **氣象諺語**
   - 全國通用諺語
   - 臺灣在地諺語
   - 來源：民俗文獻、農業諺語集

3. **物候資料**
   - 各地花期歷史紀錄
   - 生態活動時間
   - 來源：國家公園、林務局

4. **地理氣候資料**
   - 各地微氣候特徵
   - 地形影響說明
   - 來源：氣象局、地理文獻

### 現有可用資料

- ✅ 36 年歷史氣象觀測（raw_observations）
- ✅ 每日統計摘要（daily_statistics）
- ✅ 農曆資訊（cnlunar）
- ✅ 14 個主要氣象站資料

---

## 技術架構

### 後端新增

```
backend/
├── app/
│   ├── models/
│   │   ├── solar_term.py      # 節氣模型
│   │   ├── proverb.py         # 諺語模型
│   │   └── phenology.py       # 物候模型
│   ├── services/
│   │   ├── ai_engine.py       # LLM 整合
│   │   ├── solar_term.py      # 節氣服務
│   │   ├── proverb_verify.py  # 諺語驗證
│   │   └── climate_trend.py   # 氣候趨勢分析
│   └── api/v2/
│       ├── solar_term.py      # 節氣 API
│       ├── proverb.py         # 諺語 API
│       ├── climate.py         # 氣候變遷 API
│       └── planner.py         # 活動規劃 API
```

### 前端新增

```
frontend/src/
├── components/
│   ├── SolarTermCard.tsx      # 節氣卡片
│   ├── ProverbCard.tsx        # 諺語驗證卡片
│   ├── ClimateTrend.tsx       # 氣候趨勢圖
│   └── EventPlanner.tsx       # 活動規劃精靈
├── pages/
│   ├── solar-term/            # 節氣頁面
│   ├── climate/               # 氣候變遷頁面
│   └── planner/               # 活動規劃頁面
```

---

## 開發優先順序

| 優先級 | 功能 | 預估工作量 | 價值 |
|--------|------|-----------|------|
| P0 | 年代分層統計 | 中 | 高 - 立即提升比較功能價值 |
| P0 | 節氣資料庫 | 中 | 高 - 系統核心特色 |
| P1 | 氣象諺語庫 | 中 | 高 - 獨特賣點 |
| P1 | 諺語科學驗證 | 中 | 高 - AI 智慧展現 |
| P1 | 氣候變遷指標 | 中 | 高 - 時代意義 |
| P2 | LLM 整合 | 大 | 高 - 智慧生成核心 |
| P2 | 智慧活動規劃 | 大 | 高 - 實用功能 |
| P3 | 物候預報 | 中 | 中 - 特色功能 |
| P3 | 微氣候地圖 | 中 | 中 - 教育價值 |

---

## 成功指標

1. **功能完整度**
   - [ ] 24 節氣全部有深度解讀
   - [ ] 50+ 諺語有科學驗證
   - [ ] 14 站點都有氣候趨勢分析

2. **用戶價值**
   - [ ] 活動規劃建議準確有用
   - [ ] 內容有趣、有教育意義
   - [ ] 與氣象局形成差異化

3. **技術品質**
   - [ ] AI 生成內容品質穩定
   - [ ] 回應速度 < 2 秒
   - [ ] 成本可控

---

## 下一步行動

1. **立即開始 Phase 3.1** - 強化數據基礎
2. **同步收集** - 節氣、諺語資料
3. **原型設計** - AI 生成內容的呈現方式
